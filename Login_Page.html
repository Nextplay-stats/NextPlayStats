<!DOCTYPE HTML>
<html>
<head>
	<title>Login - Escape Velocity by HTML5 UP</title>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
	<link rel="stylesheet" href="assets/css/main.css" />
</head>
<body class="no-sidebar is-preload">
<div id="page-wrapper">

	<!-- Header -->
	<section id="header" class="wrapper">
		<div id="logo">
			<h1><a href="index.html">Login</a></h1>
			<p>Secure access to your dashboard</p>
		</div>

		<!-- Nav -->
		<nav id="nav">
			<ul>
				<li class="current"><a href="index.html">Home</a></li>
				<li>
					<a href="#">Match Centre</a>
					<ul>
						<li><a href="League_Team.html">League/Team Directory</a></li>
						<li><a href="Fixtures_Results.html">Fixtures and Results</a></li>
					</ul>
				</li>
				<li><a href="Features.html">How does it work?</a></li>
				<li><a href="Dashboards_Web.html">Dashboards</a></li>
				<li><a href="Membership.html">Membership</a></li>
				<li><a href="Blog.html">Blog</a></li>
				<li><a href="About_Us.html">About Us</a></li>
			</ul>
		</nav>
	</section>

	<!-- Main -->
	<div id="main" class="wrapper style2">
		<div class="title">Login</div>
		<div class="container">
			<!-- Content -->
			<div id="content">
				<article class="box post">
					<header class="style1">
						<h2>Log into your account</h2>
						<p>Access is role-based for different user types</p>
					</header>

					<!-- Login Form -->
					<form onsubmit="login(); return false;">
						<div class="row gtr-50">
							<div class="col-6 col-12-small">
								<input type="email" id="email" placeholder="Email" required />
							</div>
							<div class="col-6 col-12-small">
								<input type="password" id="password" placeholder="Password" required />
							</div>
							<div class="col-12">
								<ul class="actions">
									<li><input type="submit" class="style1" value="Login" /></li>
								</ul>
							</div>
						</div>
					</form>
					<p id="error-message" style="color:red;"></p>
				</article>
			</div>
		</div>
	</div>

	<!-- Footer (unchanged) -->
	<section id="footer" class="wrapper">
		<!-- ... footer remains the same ... -->
	</section>
</div>

<!-- Scripts -->
<script src="assets/js/jquery.min.js"></script>
<script src="assets/js/jquery.dropotron.min.js"></script>
<script src="assets/js/browser.min.js"></script>
<script src="assets/js/breakpoints.min.js"></script>
<script src="assets/js/util.js"></script>
<script src="assets/js/main.js"></script>

<!-- Firebase Scripts -->
<script src="https://www.gstatic.com/firebasejs/10.0.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.0.0/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.0.0/firebase-firestore.js"></script>

<!-- Firebase Config -->
<script>
	const firebaseConfig = {
		apiKey: "YOUR_API_KEY",
		authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
		projectId: "YOUR_PROJECT_ID",
		storageBucket: "YOUR_PROJECT_ID.appspot.com",
		messagingSenderId: "YOUR_SENDER_ID",
		appId: "YOUR_APP_ID"
	};
	firebase.initializeApp(firebaseConfig);
	const auth = firebase.auth();
	const db = firebase.firestore();
</script>

<!-- Login Script -->
<script>
	function login() {
		const email = document.getElementById("email").value;
		const password = document.getElementById("password").value;
		const errorEl = document.getElementById("error-message");

		auth.signInWithEmailAndPassword(email, password)
			.then((userCredential) => {
				const uid = userCredential.user.uid;

				db.collection("roles").doc(uid).get().then((doc) => {
					if (doc.exists) {
						const role = doc.data().role;

						if (role === "admin") {
							window.location.href = "admin.html";
						} else {
							window.location.href = "dashboard.html";
						}
					} else {
						errorEl.textContent = "No role assigned. Please contact support.";
					}
				});
			})
			.catch((error) => {
				errorEl.textContent = error.message;
			});
	}
</script>

</body>
</html>
